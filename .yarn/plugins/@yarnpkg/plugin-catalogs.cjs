/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-catalogs",
factory: function (require) {
"use strict";var plugin=(()=>{var Le=Object.create;var Et=Object.defineProperty;var Ie=Object.getOwnPropertyDescriptor;var He=Object.getOwnPropertyNames;var Ne=Object.getPrototypeOf,we=Object.prototype.hasOwnProperty;var ft=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(r,e)=>(typeof require<"u"?require:r)[e]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var at=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),ke=(t,r)=>{for(var e in r)Et(t,e,{get:r[e],enumerable:!0})},Vt=(t,r,e,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of He(r))!we.call(t,n)&&n!==e&&Et(t,n,{get:()=>r[n],enumerable:!(o=Ie(r,n))||o.enumerable});return t};var yt=(t,r,e)=>(e=t!=null?Le(Ne(t)):{},Vt(r||!t||!t.__esModule?Et(e,"default",{value:t,enumerable:!0}):e,t)),Me=t=>Vt(Et({},"__esModule",{value:!0}),t);var dt=at((Wr,ae)=>{"use strict";var Q="\\\\/",oe=`[^${Q}]`,tt="\\.",Ze="\\+",ze="\\?",St="\\/",Je="(?=.)",ne="[^/]",kt=`(?:${St}|$)`,se=`(?:^|${St})`,Mt=`${tt}{1,2}${kt}`,tr=`(?!${tt})`,er=`(?!${se}${Mt})`,rr=`(?!${tt}{0,1}${kt})`,or=`(?!${Mt})`,nr=`[^.${St}]`,sr=`${ne}*?`,ir="/",ie={DOT_LITERAL:tt,PLUS_LITERAL:Ze,QMARK_LITERAL:ze,SLASH_LITERAL:St,ONE_CHAR:Je,QMARK:ne,END_ANCHOR:kt,DOTS_SLASH:Mt,NO_DOT:tr,NO_DOTS:er,NO_DOT_SLASH:rr,NO_DOTS_SLASH:or,QMARK_NO_DOT:nr,STAR:sr,START_ANCHOR:se,SEP:ir},ar={...ie,SLASH_LITERAL:`[${Q}]`,QMARK:oe,STAR:`${oe}*?`,DOTS_SLASH:`${tt}{1,2}(?:[${Q}]|$)`,NO_DOT:`(?!${tt})`,NO_DOTS:`(?!(?:^|[${Q}])${tt}{1,2}(?:[${Q}]|$))`,NO_DOT_SLASH:`(?!${tt}{0,1}(?:[${Q}]|$))`,NO_DOTS_SLASH:`(?!${tt}{1,2}(?:[${Q}]|$))`,QMARK_NO_DOT:`[^.${Q}]`,START_ANCHOR:`(?:^|[${Q}])`,END_ANCHOR:`(?:[${Q}]|$)`,SEP:"\\"},ur={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};ae.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:ur,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?ar:ie}}});var At=at(B=>{"use strict";var{REGEX_BACKSLASH:cr,REGEX_REMOVE_BACKSLASH:lr,REGEX_SPECIAL_CHARS:fr,REGEX_SPECIAL_CHARS_GLOBAL:pr}=dt();B.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);B.hasRegexChars=t=>fr.test(t);B.isRegexChar=t=>t.length===1&&B.hasRegexChars(t);B.escapeRegex=t=>t.replace(pr,"\\$1");B.toPosixSlashes=t=>t.replace(cr,"/");B.isWindows=()=>{if(typeof navigator<"u"&&navigator.platform){let t=navigator.platform.toLowerCase();return t==="win32"||t==="windows"}return typeof process<"u"&&process.platform?process.platform==="win32":!1};B.removeBackslashes=t=>t.replace(lr,r=>r==="\\"?"":r);B.escapeLast=(t,r,e)=>{let o=t.lastIndexOf(r,e);return o===-1?t:t[o-1]==="\\"?B.escapeLast(t,r,o-1):`${t.slice(0,o)}\\${t.slice(o)}`};B.removePrefix=(t,r={})=>{let e=t;return e.startsWith("./")&&(e=e.slice(2),r.prefix="./"),e};B.wrapOutput=(t,r={},e={})=>{let o=e.contains?"":"^",n=e.contains?"":"$",c=`${o}(?:${t})${n}`;return r.negated===!0&&(c=`(?:^(?!${c}).*$)`),c};B.basename=(t,{windows:r}={})=>{let e=t.split(r?/[\\/]/:"/"),o=e[e.length-1];return o===""?e[e.length-2]:o}});var de=at((Vr,he)=>{"use strict";var ue=At(),{CHAR_ASTERISK:Dt,CHAR_AT:gr,CHAR_BACKWARD_SLASH:Rt,CHAR_COMMA:hr,CHAR_DOT:Pt,CHAR_EXCLAMATION_MARK:Bt,CHAR_FORWARD_SLASH:ge,CHAR_LEFT_CURLY_BRACE:Gt,CHAR_LEFT_PARENTHESES:jt,CHAR_LEFT_SQUARE_BRACKET:dr,CHAR_PLUS:Ar,CHAR_QUESTION_MARK:ce,CHAR_RIGHT_CURLY_BRACE:Rr,CHAR_RIGHT_PARENTHESES:le,CHAR_RIGHT_SQUARE_BRACKET:br}=dt(),fe=t=>t===ge||t===Rt,pe=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},Cr=(t,r)=>{let e=r||{},o=t.length-1,n=e.parts===!0||e.scanToEnd===!0,c=[],u=[],p=[],g=t,d=-1,C=0,L=0,I=!1,G=!1,_=!1,w=!1,ot=!1,q=!1,y=!1,Y=!1,nt=!1,M=!1,k=0,j,h,R={value:"",depth:0,isGlob:!1},a=()=>d>=o,P=()=>g.charCodeAt(d+1),H=()=>(j=h,g.charCodeAt(++d));for(;d<o;){h=H();let E;if(h===Rt){y=R.backslashes=!0,h=H(),h===Gt&&(q=!0);continue}if(q===!0||h===Gt){for(k++;a()!==!0&&(h=H());){if(h===Rt){y=R.backslashes=!0,H();continue}if(h===Gt){k++;continue}if(q!==!0&&h===Pt&&(h=H())===Pt){if(I=R.isBrace=!0,_=R.isGlob=!0,M=!0,n===!0)continue;break}if(q!==!0&&h===hr){if(I=R.isBrace=!0,_=R.isGlob=!0,M=!0,n===!0)continue;break}if(h===Rr&&(k--,k===0)){q=!1,I=R.isBrace=!0,M=!0;break}}if(n===!0)continue;break}if(h===ge){if(c.push(d),u.push(R),R={value:"",depth:0,isGlob:!1},M===!0)continue;if(j===Pt&&d===C+1){C+=2;continue}L=d+1;continue}if(e.noext!==!0&&(h===Ar||h===gr||h===Dt||h===ce||h===Bt)===!0&&P()===jt){if(_=R.isGlob=!0,w=R.isExtglob=!0,M=!0,h===Bt&&d===C&&(nt=!0),n===!0){for(;a()!==!0&&(h=H());){if(h===Rt){y=R.backslashes=!0,h=H();continue}if(h===le){_=R.isGlob=!0,M=!0;break}}continue}break}if(h===Dt){if(j===Dt&&(ot=R.isGlobstar=!0),_=R.isGlob=!0,M=!0,n===!0)continue;break}if(h===ce){if(_=R.isGlob=!0,M=!0,n===!0)continue;break}if(h===dr){for(;a()!==!0&&(E=H());){if(E===Rt){y=R.backslashes=!0,H();continue}if(E===br){G=R.isBracket=!0,_=R.isGlob=!0,M=!0;break}}if(n===!0)continue;break}if(e.nonegate!==!0&&h===Bt&&d===C){Y=R.negated=!0,C++;continue}if(e.noparen!==!0&&h===jt){if(_=R.isGlob=!0,n===!0){for(;a()!==!0&&(h=H());){if(h===jt){y=R.backslashes=!0,h=H();continue}if(h===le){M=!0;break}}continue}break}if(_===!0){if(M=!0,n===!0)continue;break}}e.noext===!0&&(w=!1,_=!1);let $=g,s="",i="";C>0&&(s=g.slice(0,C),g=g.slice(C),L-=C),$&&_===!0&&L>0?($=g.slice(0,L),i=g.slice(L)):_===!0?($="",i=g):$=g,$&&$!==""&&$!=="/"&&$!==g&&fe($.charCodeAt($.length-1))&&($=$.slice(0,-1)),e.unescape===!0&&(i&&(i=ue.removeBackslashes(i)),$&&y===!0&&($=ue.removeBackslashes($)));let W={prefix:s,input:t,start:C,base:$,glob:i,isBrace:I,isBracket:G,isGlob:_,isExtglob:w,isGlobstar:ot,negated:Y,negatedExtglob:nt};if(e.tokens===!0&&(W.maxDepth=0,fe(h)||u.push(R),W.tokens=u),e.parts===!0||e.tokens===!0){let E;for(let O=0;O<c.length;O++){let J=E?E+1:C,U=c[O],rt=t.slice(J,U);e.tokens&&(O===0&&C!==0?(u[O].isPrefix=!0,u[O].value=s):u[O].value=rt,pe(u[O]),W.maxDepth+=u[O].depth),(O!==0||rt!=="")&&p.push(rt),E=U}if(E&&E+1<t.length){let O=t.slice(E+1);p.push(O),e.tokens&&(u[u.length-1].value=O,pe(u[u.length-1]),W.maxDepth+=u[u.length-1].depth)}W.slashes=c,W.parts=p}return W};he.exports=Cr});var be=at((Kr,Re)=>{"use strict";var Tt=dt(),Z=At(),{MAX_LENGTH:$t,POSIX_REGEX_SOURCE:_r,REGEX_NON_SPECIAL_CHARS:Er,REGEX_SPECIAL_CHARS_BACKREF:yr,REPLACEMENTS:Ae}=Tt,mr=(t,r)=>{if(typeof r.expandRange=="function")return r.expandRange(...t,r);t.sort();let e=`[${t.join("-")}]`;try{new RegExp(e)}catch{return t.map(n=>Z.escapeRegex(n)).join("..")}return e},lt=(t,r)=>`Missing ${t}: "${r}" - use "\\\\${r}" to match literal characters`,Ft=(t,r)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=Ae[t]||t;let e={...r},o=typeof e.maxLength=="number"?Math.min($t,e.maxLength):$t,n=t.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);let c={type:"bos",value:"",output:e.prepend||""},u=[c],p=e.capture?"":"?:",g=Tt.globChars(e.windows),d=Tt.extglobChars(g),{DOT_LITERAL:C,PLUS_LITERAL:L,SLASH_LITERAL:I,ONE_CHAR:G,DOTS_SLASH:_,NO_DOT:w,NO_DOT_SLASH:ot,NO_DOTS_SLASH:q,QMARK:y,QMARK_NO_DOT:Y,STAR:nt,START_ANCHOR:M}=g,k=f=>`(${p}(?:(?!${M}${f.dot?_:C}).)*?)`,j=e.dot?"":w,h=e.dot?y:Y,R=e.bash===!0?k(e):nt;e.capture&&(R=`(${R})`),typeof e.noext=="boolean"&&(e.noextglob=e.noext);let a={input:t,index:-1,start:0,dot:e.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};t=Z.removePrefix(t,a),n=t.length;let P=[],H=[],$=[],s=c,i,W=()=>a.index===n-1,E=a.peek=(f=1)=>t[a.index+f],O=a.advance=()=>t[++a.index]||"",J=()=>t.slice(a.index+1),U=(f="",m=0)=>{a.consumed+=f,a.index+=m},rt=f=>{a.output+=f.output!=null?f.output:f.value,U(f.value)},$e=()=>{let f=1;for(;E()==="!"&&(E(2)!=="("||E(3)==="?");)O(),a.start++,f++;return f%2===0?!1:(a.negated=!0,a.start++,!0)},bt=f=>{a[f]++,$.push(f)},st=f=>{a[f]--,$.pop()},b=f=>{if(s.type==="globstar"){let m=a.braces>0&&(f.type==="comma"||f.type==="brace"),l=f.extglob===!0||P.length&&(f.type==="pipe"||f.type==="paren");f.type!=="slash"&&f.type!=="paren"&&!m&&!l&&(a.output=a.output.slice(0,-s.output.length),s.type="star",s.value="*",s.output=R,a.output+=s.output)}if(P.length&&f.type!=="paren"&&(P[P.length-1].inner+=f.value),(f.value||f.output)&&rt(f),s&&s.type==="text"&&f.type==="text"){s.output=(s.output||s.value)+f.value,s.value+=f.value;return}f.prev=s,u.push(f),s=f},Ct=(f,m)=>{let l={...d[m],conditions:1,inner:""};l.prev=s,l.parens=a.parens,l.output=a.output;let A=(e.capture?"(":"")+l.open;bt("parens"),b({type:f,value:m,output:a.output?"":G}),b({type:"paren",extglob:!0,value:O(),output:A}),P.push(l)},ve=f=>{let m=f.close+(e.capture?")":""),l;if(f.type==="negate"){let A=R;if(f.inner&&f.inner.length>1&&f.inner.includes("/")&&(A=k(e)),(A!==R||W()||/^\)+$/.test(J()))&&(m=f.close=`)$))${A}`),f.inner.includes("*")&&(l=J())&&/^\.[^\\/.]+$/.test(l)){let S=Ft(l,{...r,fastpaths:!1}).output;m=f.close=`)${S})${A})`}f.prev.type==="bos"&&(a.negatedExtglob=!0)}b({type:"paren",extglob:!0,value:i,output:m}),st("parens")};if(e.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let f=!1,m=t.replace(yr,(l,A,S,D,N,Lt)=>D==="\\"?(f=!0,l):D==="?"?A?A+D+(N?y.repeat(N.length):""):Lt===0?h+(N?y.repeat(N.length):""):y.repeat(S.length):D==="."?C.repeat(S.length):D==="*"?A?A+D+(N?R:""):R:A?l:`\\${l}`);return f===!0&&(e.unescape===!0?m=m.replace(/\\/g,""):m=m.replace(/\\+/g,l=>l.length%2===0?"\\\\":l?"\\":"")),m===t&&e.contains===!0?(a.output=t,a):(a.output=Z.wrapOutput(m,a,r),a)}for(;!W();){if(i=O(),i==="\0")continue;if(i==="\\"){let l=E();if(l==="/"&&e.bash!==!0||l==="."||l===";")continue;if(!l){i+="\\",b({type:"text",value:i});continue}let A=/^\\+/.exec(J()),S=0;if(A&&A[0].length>2&&(S=A[0].length,a.index+=S,S%2!==0&&(i+="\\")),e.unescape===!0?i=O():i+=O(),a.brackets===0){b({type:"text",value:i});continue}}if(a.brackets>0&&(i!=="]"||s.value==="["||s.value==="[^")){if(e.posix!==!1&&i===":"){let l=s.value.slice(1);if(l.includes("[")&&(s.posix=!0,l.includes(":"))){let A=s.value.lastIndexOf("["),S=s.value.slice(0,A),D=s.value.slice(A+2),N=_r[D];if(N){s.value=S+N,a.backtrack=!0,O(),!c.output&&u.indexOf(s)===1&&(c.output=G);continue}}}(i==="["&&E()!==":"||i==="-"&&E()==="]")&&(i=`\\${i}`),i==="]"&&(s.value==="["||s.value==="[^")&&(i=`\\${i}`),e.posix===!0&&i==="!"&&s.value==="["&&(i="^"),s.value+=i,rt({value:i});continue}if(a.quotes===1&&i!=='"'){i=Z.escapeRegex(i),s.value+=i,rt({value:i});continue}if(i==='"'){a.quotes=a.quotes===1?0:1,e.keepQuotes===!0&&b({type:"text",value:i});continue}if(i==="("){bt("parens"),b({type:"paren",value:i});continue}if(i===")"){if(a.parens===0&&e.strictBrackets===!0)throw new SyntaxError(lt("opening","("));let l=P[P.length-1];if(l&&a.parens===l.parens+1){ve(P.pop());continue}b({type:"paren",value:i,output:a.parens?")":"\\)"}),st("parens");continue}if(i==="["){if(e.nobracket===!0||!J().includes("]")){if(e.nobracket!==!0&&e.strictBrackets===!0)throw new SyntaxError(lt("closing","]"));i=`\\${i}`}else bt("brackets");b({type:"bracket",value:i});continue}if(i==="]"){if(e.nobracket===!0||s&&s.type==="bracket"&&s.value.length===1){b({type:"text",value:i,output:`\\${i}`});continue}if(a.brackets===0){if(e.strictBrackets===!0)throw new SyntaxError(lt("opening","["));b({type:"text",value:i,output:`\\${i}`});continue}st("brackets");let l=s.value.slice(1);if(s.posix!==!0&&l[0]==="^"&&!l.includes("/")&&(i=`/${i}`),s.value+=i,rt({value:i}),e.literalBrackets===!1||Z.hasRegexChars(l))continue;let A=Z.escapeRegex(s.value);if(a.output=a.output.slice(0,-s.value.length),e.literalBrackets===!0){a.output+=A,s.value=A;continue}s.value=`(${p}${A}|${s.value})`,a.output+=s.value;continue}if(i==="{"&&e.nobrace!==!0){bt("braces");let l={type:"brace",value:i,output:"(",outputIndex:a.output.length,tokensIndex:a.tokens.length};H.push(l),b(l);continue}if(i==="}"){let l=H[H.length-1];if(e.nobrace===!0||!l){b({type:"text",value:i,output:i});continue}let A=")";if(l.dots===!0){let S=u.slice(),D=[];for(let N=S.length-1;N>=0&&(u.pop(),S[N].type!=="brace");N--)S[N].type!=="dots"&&D.unshift(S[N].value);A=mr(D,e),a.backtrack=!0}if(l.comma!==!0&&l.dots!==!0){let S=a.output.slice(0,l.outputIndex),D=a.tokens.slice(l.tokensIndex);l.value=l.output="\\{",i=A="\\}",a.output=S;for(let N of D)a.output+=N.output||N.value}b({type:"brace",value:i,output:A}),st("braces"),H.pop();continue}if(i==="|"){P.length>0&&P[P.length-1].conditions++,b({type:"text",value:i});continue}if(i===","){let l=i,A=H[H.length-1];A&&$[$.length-1]==="braces"&&(A.comma=!0,l="|"),b({type:"comma",value:i,output:l});continue}if(i==="/"){if(s.type==="dot"&&a.index===a.start+1){a.start=a.index+1,a.consumed="",a.output="",u.pop(),s=c;continue}b({type:"slash",value:i,output:I});continue}if(i==="."){if(a.braces>0&&s.type==="dot"){s.value==="."&&(s.output=C);let l=H[H.length-1];s.type="dots",s.output+=i,s.value+=i,l.dots=!0;continue}if(a.braces+a.parens===0&&s.type!=="bos"&&s.type!=="slash"){b({type:"text",value:i,output:C});continue}b({type:"dot",value:i,output:C});continue}if(i==="?"){if(!(s&&s.value==="(")&&e.noextglob!==!0&&E()==="("&&E(2)!=="?"){Ct("qmark",i);continue}if(s&&s.type==="paren"){let A=E(),S=i;(s.value==="("&&!/[!=<:]/.test(A)||A==="<"&&!/<([!=]|\w+>)/.test(J()))&&(S=`\\${i}`),b({type:"text",value:i,output:S});continue}if(e.dot!==!0&&(s.type==="slash"||s.type==="bos")){b({type:"qmark",value:i,output:Y});continue}b({type:"qmark",value:i,output:y});continue}if(i==="!"){if(e.noextglob!==!0&&E()==="("&&(E(2)!=="?"||!/[!=<:]/.test(E(3)))){Ct("negate",i);continue}if(e.nonegate!==!0&&a.index===0){$e();continue}}if(i==="+"){if(e.noextglob!==!0&&E()==="("&&E(2)!=="?"){Ct("plus",i);continue}if(s&&s.value==="("||e.regex===!1){b({type:"plus",value:i,output:L});continue}if(s&&(s.type==="bracket"||s.type==="paren"||s.type==="brace")||a.parens>0){b({type:"plus",value:i});continue}b({type:"plus",value:L});continue}if(i==="@"){if(e.noextglob!==!0&&E()==="("&&E(2)!=="?"){b({type:"at",extglob:!0,value:i,output:""});continue}b({type:"text",value:i});continue}if(i!=="*"){(i==="$"||i==="^")&&(i=`\\${i}`);let l=Er.exec(J());l&&(i+=l[0],a.index+=l[0].length),b({type:"text",value:i});continue}if(s&&(s.type==="globstar"||s.star===!0)){s.type="star",s.star=!0,s.value+=i,s.output=R,a.backtrack=!0,a.globstar=!0,U(i);continue}let f=J();if(e.noextglob!==!0&&/^\([^?]/.test(f)){Ct("star",i);continue}if(s.type==="star"){if(e.noglobstar===!0){U(i);continue}let l=s.prev,A=l.prev,S=l.type==="slash"||l.type==="bos",D=A&&(A.type==="star"||A.type==="globstar");if(e.bash===!0&&(!S||f[0]&&f[0]!=="/")){b({type:"star",value:i,output:""});continue}let N=a.braces>0&&(l.type==="comma"||l.type==="brace"),Lt=P.length&&(l.type==="pipe"||l.type==="paren");if(!S&&l.type!=="paren"&&!N&&!Lt){b({type:"star",value:i,output:""});continue}for(;f.slice(0,3)==="/**";){let _t=t[a.index+4];if(_t&&_t!=="/")break;f=f.slice(3),U("/**",3)}if(l.type==="bos"&&W()){s.type="globstar",s.value+=i,s.output=k(e),a.output=s.output,a.globstar=!0,U(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&!D&&W()){a.output=a.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=k(e)+(e.strictSlashes?")":"|$)"),s.value+=i,a.globstar=!0,a.output+=l.output+s.output,U(i);continue}if(l.type==="slash"&&l.prev.type!=="bos"&&f[0]==="/"){let _t=f[1]!==void 0?"|$":"";a.output=a.output.slice(0,-(l.output+s.output).length),l.output=`(?:${l.output}`,s.type="globstar",s.output=`${k(e)}${I}|${I}${_t})`,s.value+=i,a.output+=l.output+s.output,a.globstar=!0,U(i+O()),b({type:"slash",value:"/",output:""});continue}if(l.type==="bos"&&f[0]==="/"){s.type="globstar",s.value+=i,s.output=`(?:^|${I}|${k(e)}${I})`,a.output=s.output,a.globstar=!0,U(i+O()),b({type:"slash",value:"/",output:""});continue}a.output=a.output.slice(0,-s.output.length),s.type="globstar",s.output=k(e),s.value+=i,a.output+=s.output,a.globstar=!0,U(i);continue}let m={type:"star",value:i,output:R};if(e.bash===!0){m.output=".*?",(s.type==="bos"||s.type==="slash")&&(m.output=j+m.output),b(m);continue}if(s&&(s.type==="bracket"||s.type==="paren")&&e.regex===!0){m.output=i,b(m);continue}(a.index===a.start||s.type==="slash"||s.type==="dot")&&(s.type==="dot"?(a.output+=ot,s.output+=ot):e.dot===!0?(a.output+=q,s.output+=q):(a.output+=j,s.output+=j),E()!=="*"&&(a.output+=G,s.output+=G)),b(m)}for(;a.brackets>0;){if(e.strictBrackets===!0)throw new SyntaxError(lt("closing","]"));a.output=Z.escapeLast(a.output,"["),st("brackets")}for(;a.parens>0;){if(e.strictBrackets===!0)throw new SyntaxError(lt("closing",")"));a.output=Z.escapeLast(a.output,"("),st("parens")}for(;a.braces>0;){if(e.strictBrackets===!0)throw new SyntaxError(lt("closing","}"));a.output=Z.escapeLast(a.output,"{"),st("braces")}if(e.strictSlashes!==!0&&(s.type==="star"||s.type==="bracket")&&b({type:"maybe_slash",value:"",output:`${I}?`}),a.backtrack===!0){a.output="";for(let f of a.tokens)a.output+=f.output!=null?f.output:f.value,f.suffix&&(a.output+=f.suffix)}return a};Ft.fastpaths=(t,r)=>{let e={...r},o=typeof e.maxLength=="number"?Math.min($t,e.maxLength):$t,n=t.length;if(n>o)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${o}`);t=Ae[t]||t;let{DOT_LITERAL:c,SLASH_LITERAL:u,ONE_CHAR:p,DOTS_SLASH:g,NO_DOT:d,NO_DOTS:C,NO_DOTS_SLASH:L,STAR:I,START_ANCHOR:G}=Tt.globChars(e.windows),_=e.dot?C:d,w=e.dot?L:d,ot=e.capture?"":"?:",q={negated:!1,prefix:""},y=e.bash===!0?".*?":I;e.capture&&(y=`(${y})`);let Y=j=>j.noglobstar===!0?y:`(${ot}(?:(?!${G}${j.dot?g:c}).)*?)`,nt=j=>{switch(j){case"*":return`${_}${p}${y}`;case".*":return`${c}${p}${y}`;case"*.*":return`${_}${y}${c}${p}${y}`;case"*/*":return`${_}${y}${u}${p}${w}${y}`;case"**":return _+Y(e);case"**/*":return`(?:${_}${Y(e)}${u})?${w}${p}${y}`;case"**/*.*":return`(?:${_}${Y(e)}${u})?${w}${y}${c}${p}${y}`;case"**/.*":return`(?:${_}${Y(e)}${u})?${c}${p}${y}`;default:{let h=/^(.*?)\.(\w+)$/.exec(j);if(!h)return;let R=nt(h[1]);return R?R+c+h[2]:void 0}}},M=Z.removePrefix(t,q),k=nt(M);return k&&e.strictSlashes!==!0&&(k+=`${u}?`),k};Re.exports=Ft});var Ee=at((Xr,_e)=>{"use strict";var xr=de(),Wt=be(),Ce=At(),Or=dt(),Sr=t=>t&&typeof t=="object"&&!Array.isArray(t),v=(t,r,e=!1)=>{if(Array.isArray(t)){let C=t.map(I=>v(I,r,e));return I=>{for(let G of C){let _=G(I);if(_)return _}return!1}}let o=Sr(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!o)throw new TypeError("Expected pattern to be a non-empty string");let n=r||{},c=n.windows,u=o?v.compileRe(t,r):v.makeRe(t,r,!1,!0),p=u.state;delete u.state;let g=()=>!1;if(n.ignore){let C={...r,ignore:null,onMatch:null,onResult:null};g=v(n.ignore,C,e)}let d=(C,L=!1)=>{let{isMatch:I,match:G,output:_}=v.test(C,u,r,{glob:t,posix:c}),w={glob:t,state:p,regex:u,posix:c,input:C,output:_,match:G,isMatch:I};return typeof n.onResult=="function"&&n.onResult(w),I===!1?(w.isMatch=!1,L?w:!1):g(C)?(typeof n.onIgnore=="function"&&n.onIgnore(w),w.isMatch=!1,L?w:!1):(typeof n.onMatch=="function"&&n.onMatch(w),L?w:!0)};return e&&(d.state=p),d};v.test=(t,r,e,{glob:o,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let c=e||{},u=c.format||(n?Ce.toPosixSlashes:null),p=t===o,g=p&&u?u(t):t;return p===!1&&(g=u?u(t):t,p=g===o),(p===!1||c.capture===!0)&&(c.matchBase===!0||c.basename===!0?p=v.matchBase(t,r,e,n):p=r.exec(g)),{isMatch:!!p,match:p,output:g}};v.matchBase=(t,r,e)=>(r instanceof RegExp?r:v.makeRe(r,e)).test(Ce.basename(t));v.isMatch=(t,r,e)=>v(r,e)(t);v.parse=(t,r)=>Array.isArray(t)?t.map(e=>v.parse(e,r)):Wt(t,{...r,fastpaths:!1});v.scan=(t,r)=>xr(t,r);v.compileRe=(t,r,e=!1,o=!1)=>{if(e===!0)return t.output;let n=r||{},c=n.contains?"":"^",u=n.contains?"":"$",p=`${c}(?:${t.output})${u}`;t&&t.negated===!0&&(p=`^(?!${p}).*$`);let g=v.toRegex(p,r);return o===!0&&(g.state=t),g};v.makeRe=(t,r={},e=!1,o=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return r.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=Wt.fastpaths(t,r)),n.output||(n=Wt(t,r)),v.compileRe(n,r,e,o)};v.toRegex=(t,r)=>{try{let e=r||{};return new RegExp(t,e.flags||(e.nocase?"i":""))}catch(e){if(r&&r.debug===!0)throw e;return/$^/}};v.constants=Or;_e.exports=v});var Oe=at((qr,xe)=>{"use strict";var ye=Ee(),Tr=At();function me(t,r,e=!1){return r&&(r.windows===null||r.windows===void 0)&&(r={...r,windows:Tr.isWindows()}),ye(t,r,e)}Object.assign(me,ye);xe.exports=me});var Ir={};ke(Ir,{default:()=>Lr});var F=ft("@yarnpkg/core");var Kt=(t=0)=>r=>`\x1B[${r+t}m`,Xt=(t=0)=>r=>`\x1B[${38+t};5;${r}m`,qt=(t=0)=>(r,e,o)=>`\x1B[${38+t};2;${r};${e};${o}m`,x={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Nr=Object.keys(x.modifier),De=Object.keys(x.color),Pe=Object.keys(x.bgColor),wr=[...De,...Pe];function Be(){let t=new Map;for(let[r,e]of Object.entries(x)){for(let[o,n]of Object.entries(e))x[o]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},e[o]=x[o],t.set(n[0],n[1]);Object.defineProperty(x,r,{value:e,enumerable:!1})}return Object.defineProperty(x,"codes",{value:t,enumerable:!1}),x.color.close="\x1B[39m",x.bgColor.close="\x1B[49m",x.color.ansi=Kt(),x.color.ansi256=Xt(),x.color.ansi16m=qt(),x.bgColor.ansi=Kt(10),x.bgColor.ansi256=Xt(10),x.bgColor.ansi16m=qt(10),Object.defineProperties(x,{rgbToAnsi256:{value(r,e,o){return r===e&&e===o?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(e/255*5)+Math.round(o/255*5)},enumerable:!1},hexToRgb:{value(r){let e=/[a-f\d]{6}|[a-f\d]{3}/i.exec(r.toString(16));if(!e)return[0,0,0];let[o]=e;o.length===3&&(o=[...o].map(c=>c+c).join(""));let n=Number.parseInt(o,16);return[n>>16&255,n>>8&255,n&255]},enumerable:!1},hexToAnsi256:{value:r=>x.rgbToAnsi256(...x.hexToRgb(r)),enumerable:!1},ansi256ToAnsi:{value(r){if(r<8)return 30+r;if(r<16)return 90+(r-8);let e,o,n;if(r>=232)e=((r-232)*10+8)/255,o=e,n=e;else{r-=16;let p=r%36;e=Math.floor(r/36)/5,o=Math.floor(p/6)/5,n=p%6/5}let c=Math.max(e,o,n)*2;if(c===0)return 30;let u=30+(Math.round(n)<<2|Math.round(o)<<1|Math.round(e));return c===2&&(u+=60),u},enumerable:!1},rgbToAnsi:{value:(r,e,o)=>x.ansi256ToAnsi(x.rgbToAnsi256(r,e,o)),enumerable:!1},hexToAnsi:{value:r=>x.ansi256ToAnsi(x.hexToAnsi256(r)),enumerable:!1}}),x}var Ge=Be(),X=Ge;var xt=yt(ft("process"),1),Qt=yt(ft("os"),1),It=yt(ft("tty"),1);function V(t,r=globalThis.Deno?globalThis.Deno.args:xt.default.argv){let e=t.startsWith("-")?"":t.length===1?"-":"--",o=r.indexOf(e+t),n=r.indexOf("--");return o!==-1&&(n===-1||o<n)}var{env:T}=xt.default,mt;V("no-color")||V("no-colors")||V("color=false")||V("color=never")?mt=0:(V("color")||V("colors")||V("color=true")||V("color=always"))&&(mt=1);function je(){if("FORCE_COLOR"in T)return T.FORCE_COLOR==="true"?1:T.FORCE_COLOR==="false"?0:T.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(T.FORCE_COLOR,10),3)}function Fe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function We(t,{streamIsTTY:r,sniffFlags:e=!0}={}){let o=je();o!==void 0&&(mt=o);let n=e?mt:o;if(n===0)return 0;if(e){if(V("color=16m")||V("color=full")||V("color=truecolor"))return 3;if(V("color=256"))return 2}if("TF_BUILD"in T&&"AGENT_NAME"in T)return 1;if(t&&!r&&n===void 0)return 0;let c=n||0;if(T.TERM==="dumb")return c;if(xt.default.platform==="win32"){let u=Qt.default.release().split(".");return Number(u[0])>=10&&Number(u[2])>=10586?Number(u[2])>=14931?3:2:1}if("CI"in T)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(u=>u in T)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(u=>u in T)||T.CI_NAME==="codeship"?1:c;if("TEAMCITY_VERSION"in T)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(T.TEAMCITY_VERSION)?1:0;if(T.COLORTERM==="truecolor"||T.TERM==="xterm-kitty")return 3;if("TERM_PROGRAM"in T){let u=Number.parseInt((T.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(T.TERM_PROGRAM){case"iTerm.app":return u>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(T.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(T.TERM)||"COLORTERM"in T?1:c}function Yt(t,r={}){let e=We(t,{streamIsTTY:t&&t.isTTY,...r});return Fe(e)}var Ue={stdout:Yt({isTTY:It.default.isatty(1)}),stderr:Yt({isTTY:It.default.isatty(2)})},Zt=Ue;function zt(t,r,e){let o=t.indexOf(r);if(o===-1)return t;let n=r.length,c=0,u="";do u+=t.slice(c,o)+r+e,c=o+n,o=t.indexOf(r,c);while(o!==-1);return u+=t.slice(c),u}function Jt(t,r,e,o){let n=0,c="";do{let u=t[o-1]==="\r";c+=t.slice(n,u?o-1:o)+r+(u?`\r
`:`
`)+e,n=o+1,o=t.indexOf(`
`,n)}while(o!==-1);return c+=t.slice(n),c}var{stdout:te,stderr:ee}=Zt,Ht=Symbol("GENERATOR"),ut=Symbol("STYLER"),pt=Symbol("IS_EMPTY"),re=["ansi","ansi","ansi256","ansi16m"],ct=Object.create(null),Ve=(t,r={})=>{if(r.level&&!(Number.isInteger(r.level)&&r.level>=0&&r.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let e=te?te.level:0;t.level=r.level===void 0?e:r.level};var Ke=t=>{let r=(...e)=>e.join(" ");return Ve(r,t),Object.setPrototypeOf(r,gt.prototype),r};function gt(t){return Ke(t)}Object.setPrototypeOf(gt.prototype,Function.prototype);for(let[t,r]of Object.entries(X))ct[t]={get(){let e=Ot(this,wt(r.open,r.close,this[ut]),this[pt]);return Object.defineProperty(this,t,{value:e}),e}};ct.visible={get(){let t=Ot(this,this[ut],!0);return Object.defineProperty(this,"visible",{value:t}),t}};var Nt=(t,r,e,...o)=>t==="rgb"?r==="ansi16m"?X[e].ansi16m(...o):r==="ansi256"?X[e].ansi256(X.rgbToAnsi256(...o)):X[e].ansi(X.rgbToAnsi(...o)):t==="hex"?Nt("rgb",r,e,...X.hexToRgb(...o)):X[e][t](...o),Xe=["rgb","hex","ansi256"];for(let t of Xe){ct[t]={get(){let{level:e}=this;return function(...o){let n=wt(Nt(t,re[e],"color",...o),X.color.close,this[ut]);return Ot(this,n,this[pt])}}};let r="bg"+t[0].toUpperCase()+t.slice(1);ct[r]={get(){let{level:e}=this;return function(...o){let n=wt(Nt(t,re[e],"bgColor",...o),X.bgColor.close,this[ut]);return Ot(this,n,this[pt])}}}}var qe=Object.defineProperties(()=>{},{...ct,level:{enumerable:!0,get(){return this[Ht].level},set(t){this[Ht].level=t}}}),wt=(t,r,e)=>{let o,n;return e===void 0?(o=t,n=r):(o=e.openAll+t,n=r+e.closeAll),{open:t,close:r,openAll:o,closeAll:n,parent:e}},Ot=(t,r,e)=>{let o=(...n)=>Ye(o,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(o,qe),o[Ht]=t,o[ut]=r,o[pt]=e,o},Ye=(t,r)=>{if(t.level<=0||!r)return t[pt]?"":r;let e=t[ut];if(e===void 0)return r;let{openAll:o,closeAll:n}=e;if(r.includes("\x1B"))for(;e!==void 0;)r=zt(r,e.close,e.open),e=e.parent;let c=r.indexOf(`
`);return c!==-1&&(r=Jt(r,n,o,c)),o+r+n};Object.defineProperties(gt.prototype,ct);var Qe=gt(),jr=gt({level:ee?ee.level:0});var ht=Qe;var Ut=ft("@yarnpkg/core"),Se=yt(Oe()),it="root",z="catalog:",K=class extends Error{constructor(e,o){super(e);this.code=o;this.name="CatalogConfigurationError"}static{this.FILE_NOT_FOUND="FILE_NOT_FOUND"}static{this.INVALID_FORMAT="INVALID_FORMAT"}static{this.INVALID_ALIAS="INVALID_ALIAS"}},vt=class{constructor(){this.configCache=new Map}getInheritanceChain(r){let e=r.split("/"),o=[];for(let n=0;n<e.length;n++)o.push(e.slice(0,n+1).join("/"));return o}resolveInheritedRange(r,e,o){let n=this.getInheritanceChain(e);for(let u=n.length-1;u>=0;u--){let p=n[u],g=r.list?.[p];if(g&&typeof g=="object"){let d=g[o];if(d)return d}}if(r.list&&typeof r.list=="object"){let u=r.list[o];if(typeof u=="string")return u}let c=r.list?.[it];if(c&&typeof c=="object"){let u=c[o];if(u)return u}return null}validateInheritanceStructure(r){if(!r.list)return!0;let e=Object.keys(r.list);for(let o of e)if(typeof r.list[o]!="string"&&o.includes("/")){let n=this.getInheritanceChain(o);for(let c=0;c<n.length-1;c++){let u=n[c];if(!e.includes(u)&&u!==it)return!1}}return!0}async readConfiguration(r){let o=r.cwd,n=this.configCache.get(o);if(n)return n;let c=r.configuration.get("catalogs")||{},u=c;if(c.list?u.list=Object.entries(c.list).reduce((p,[g,d])=>(typeof d=="string"?p[it]={...p[it]||{},[g]:d}:p[g]=d,p),{}):u.list={},!this.isValidConfiguration(u))throw new K("Invalid catalogs configuration format. Expected structure: { options?: { default?: string[] | 'max', ignoredWorkspaces?: string[], validation?: 'warn' | 'strict' }, list: { [alias: string]: { [packageName: string]: string } } }",K.INVALID_FORMAT);if(!this.validateInheritanceStructure(u))throw new K("Invalid inheritance structure in catalogs configuration. Check for missing parent groups.",K.INVALID_ALIAS);return this.configCache.set(o,u),u}async getRange(r,e,o){let n=await this.readConfiguration(r),c=e.length===0?it:e,u=this.resolveInheritedRange(n,c,o);if(u)return/^[^:]+:/.test(u)?u:`${r.configuration.get("defaultProtocol")}${u}`;let p=n.list?.[c];if(!p||typeof p=="string")throw new K(`Alias "${c}" not found in .yarnrc.yml catalogs.`,K.INVALID_ALIAS);let g=p[o];if(!g)throw new K(`Package "${o}" not found in alias "${c}"`,K.INVALID_ALIAS);return/^[^:]+:/.test(g)?g:`${r.configuration.get("defaultProtocol")}${g}`}async getDefaultAliasGroups(r){let e=await this.readConfiguration(r.project);if(e.options){if(await this.shouldIgnoreWorkspace(r))return[];if(e.options.default){if(Array.isArray(e.options.default))return e.options.default;if(e.options.default==="max"){let o=Object.keys(e.list||{}),n=[...r.manifest.dependencies,...r.manifest.devDependencies],c=Object.fromEntries(o.map(p=>[p,0]));for(let[p,g]of n)if(g.range.startsWith(z)){let d=g.range.substring(z.length);c[d]=(c[d]||0)+1}let u=Math.max(...Object.values(c));return Object.keys(c).filter(p=>c[p]===u)}}}return[]}async findDependency(r,e){let o=Ut.structUtils.stringifyIdent(e),n=await this.readConfiguration(r),c=[],u=Object.entries(n.list||{}).filter(([p,g])=>typeof g=="string"?o===g:Object.keys(g).includes(o));c.push(...u.map(([p,g])=>{let d=typeof g=="string"?g:g[o];return[p,d]}));for(let[p]of Object.entries(n.list||{})){if(c.some(([d])=>d===p))continue;let g=this.resolveInheritedRange(n,p,o);g&&c.push([p,g])}return c}clearCache(r){this.configCache.delete(r)}async shouldIgnoreWorkspace(r){if(!r.manifest.name)return!1;let e=await this.readConfiguration(r.project);return e.options?.ignoredWorkspaces?(0,Se.isMatch)(Ut.structUtils.stringifyIdent(r.manifest.name),e.options.ignoredWorkspaces):!1}async getValidationLevel(r){let e=await this.readConfiguration(r.project);return e.options?.validation?e.options.validation:"warn"}isValidConfiguration(r){if(!r||typeof r!="object"||!("list"in r)||!r.list||typeof r.list!="object")return!1;for(let[e,o]of Object.entries(r.list)){if(!o||typeof o!="object")return!1;for(let n of Object.values(o))if(typeof n!="string")return!1}if("options"in r&&r.options&&typeof r.options=="object"){if("ignoredWorkspaces"in r.options&&r.options.ignoredWorkspaces&&(!Array.isArray(r.options.ignoredWorkspaces)||r.options.ignoredWorkspaces.length===0))return!1;if("default"in r.options&&r.options.default){if(Array.isArray(r.options.default)){if(r.options.default.length===0)return!1;let e=Object.keys(r.list||{});for(let o of r.options.default)if(o!=="root"&&!e.includes(o))if(o.includes("/")){let n=this.getInheritanceChain(o),c=!0;for(let u of n)if(u!=="root"&&!e.includes(u)){c=!1;break}if(!c)return!1}else return!1}else if(typeof r.options.default!="string"||r.options.default!=="max")return!1}if("validation"in r.options&&(typeof r.options.validation!="string"||!["warn","strict"].includes(r.options.validation)))return!1}return!0}};var et=new vt,$r={configuration:{catalogs:{description:"Define dependency version ranges as reusable constants across your project.",type:F.SettingsType.ANY,default:{}}},hooks:{validateWorkspace:async(t,r)=>{let e=await et.shouldIgnoreWorkspace(t);if(!e){let n=await vr(t);if(n.length>0){let c=ht.yellow(n.join(", ")),u=await et.getValidationLevel(t),p=`The following dependencies are listed in the catalogs but not using the catalog protocol: ${c}. Consider using the catalog protocol instead.`;u==="strict"?r.reportError(F.MessageName.INVALID_MANIFEST,p):u==="warn"&&r.reportWarning(F.MessageName.INVALID_MANIFEST,p)}}let o=[...Object.values(t.manifest.raw.dependencies||{}),...Object.values(t.manifest.raw.devDependencies||{})].some(n=>n.startsWith(z));e&&o&&r.reportError(F.MessageName.INVALID_MANIFEST,"Workspace is ignored from the catalogs, but it has dependencies with the catalog protocol. Consider removing the protocol.")},reduceDependency:async(t,r,...e)=>{let o=t.range.startsWith(z),n=t.range.includes("catalog%3A")&&t.range.startsWith("patch:");if(!o&&!n)return t;try{let c="",u=t.range;if(o)c=t.range.slice(z.length);else if(n){let L=t.range.match(/catalog%3A([^#&]*)/);L&&(c=L[1]||"")}let p=F.structUtils.stringifyIdent(t),g=await et.getRange(r,c,p),d;o?d=F.structUtils.makeDescriptor(F.structUtils.makeIdent(t.scope,t.name),g):d=F.structUtils.makeDescriptor(F.structUtils.makeIdent(t.scope,t.name),u.replace(/catalog%3A[^#&]*/,g));let C=await r.configuration.reduceHook(L=>L.reduceDependency,d,r,...e);return C!==d?C:d}catch(c){throw c instanceof K?new Error(`Failed to resolve ${F.structUtils.stringifyDescriptor(t)}: ${c.message}`):c}},afterWorkspaceDependencyAddition:async(t,r,e)=>{Te(t,e)},afterWorkspaceDependencyReplacement:async(t,r,e,o)=>{Te(t,o)}}};async function vr(t){let r=await et.readConfiguration(t.project),e=new Set;if(r.list){for(let[c,u]of Object.entries(r.list))if(typeof u=="object")for(let p of Object.keys(u))e.add(p)}let o=[...Object.entries(t.manifest.raw.dependencies||{}),...Object.entries(t.manifest.raw.devDependencies||{})],n=[];for(let[c,u]of o)u.startsWith(z)||e.has(c)&&n.push(c);return n}async function Te(t,r){if(r.range.startsWith(z)){if(await et.shouldIgnoreWorkspace(t))throw new Error(ht.red("The workspace is ignored from the catalogs, but the dependency to add is using the catalog protocol. Consider removing the protocol."));return}if(await et.shouldIgnoreWorkspace(t))return;let e=await et.findDependency(t.project,r);if(e.length===0)return;let o=await et.getDefaultAliasGroups(t);if(o.length>0){for(let g of o)if(e.some(([d])=>d===g)){r.range=`${z}${g}`;return}}let n=e.map(([g])=>g===it?"":g),c=n.filter(g=>g!=="").length>0?` (${n.join(", ")})`:"",u=await et.getValidationLevel(t),p=`\u27A4 ${r.name} is listed in the catalogs config${c}, but it seems you're adding it without the catalog protocol. Consider running 'yarn add ${r.name}@${z}${n[0]}' instead.`;if(u==="strict")throw new Error(ht.red(p));u==="warn"&&console.warn(ht.yellow(p))}var Lr=$r;return Me(Ir);})();
return plugin;
}
};
